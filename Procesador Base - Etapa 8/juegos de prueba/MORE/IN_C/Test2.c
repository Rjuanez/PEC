#include "lib_sisa.h"

int MUL() {
	int v[17] = {0, 1, 9, 49, 225, 961, 3969, 16129, 65025, 261121, 1046529, 4190209, 16769025, 67092481, 268402689, 1073676289, -131071,};
	short error= 0;
	int num = 0;
	int i;
	for (i = 0; i < 17 ; i++) {
		if (num*num != v[i]) {error = i; break;}
		num = (num<<1)+1;
	}
	return error;
}	

int DIV() {
	short error = 0;
	short i;
	int v [64] = {65535, -1, 32767, 2147483647, 21845, 1431655765, 16383, 1073741823, 13107, 858993459, 10922, 715827882, 9362, 613566756, 8191, 536870911, 7281, 477218588, 6553, 429496729, 5957, 390451572, 5461, 357913941, 5041, 330382099, 4681, 306783378, 4369, 286331153, 4095, 268435455, 3855, 252645135, 3640, 238609294, 3449, 226050910, 3276, 214748364, 3120, 204522252, 2978, 195225786, 2849, 186737708, 2730, 178956970, 2621, 171798691, 2520, 165191049, 2427, 159072862, 2340, 153391689, 2259, 148102320, 2184, 143165576, 2114, 138547332, 2047, 134217727};
	int inv[32] = {-65535, -32767, -21845, -16383, -13107, -10922, -9362, -8191, -7281, -6553, -5957, -5461, -5041, -4681, -4369, -4095, -3855, -3640, -3449, -3276, -3120, -2978, -2849, -2730, -2621, -2520, -2427, -2340, -2259, -2184, -2114, 0};
	for (i= 1; i <= 32; i+=2){
		if (0xFFFF/i != v[i]) {error = i; break;}
		if (0xFFFFFFFF/i != v[i+1]) {error = i; break;}
	}
	for (i= -1; i > -32; i--){
		if (0xFFFF/i != inv[i]) {error = i; break;}
	}
	if (0xFFFFFFFF/-1 != 1) error = -1;
	return error;
	
}

int main() {
	char str[8];
	itoa(MUL(), str,10);
	write(0, 0, str, 8, 0);
	itoa(DIV(), str,10);
	write(1, 0, str, 8, 0);
	return 0;
}
